!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="./dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(!function(){var e=new Error('Cannot find module "./common"');throw e.code="MODULE_NOT_FOUND",e}()),u=r(i),l=n(1),d=r(l),s=n(3),f=r(s),c=n(6),p=r(c),v=n(5),h=r(v),m=n(!function(){var e=new Error('Cannot find module "./device"');throw e.code="MODULE_NOT_FOUND",e}()),g=r(m);n(10);var y,w=[],k=function(){function e(){o(this,e),this.version="2.0",this.device=g["default"],g["default"].appVersion=this.version}return a(e,[{key:"init",value:function(e){var t=this,n=new f["default"];for(var r in e)d["default"].constant(r,e[r]);y||(n.load().then(function(e){t.onReady(function(){new p["default"](e.data)})}),y=!0)}},{key:"setPhoneNumber",value:function(e){h["default"].setPhoneNumber(e)}},{key:"getPhoneNumber",value:function(){return h["default"].getPhoneNumber()}},{key:"setCityCode",value:function(e){h["default"].setCityCode(e)}},{key:"getCityCode",value:function(){return h["default"].getCityCode()}},{key:"setUserProfile",value:function(e){h["default"].setUserProfile(e)}},{key:"getUserProfile",value:function(){return h["default"].getUserProfile()}},{key:"onReady",value:function(e){var t=this;u["default"].isFunction(e)&&w.push(e),"complete"===window.document.readyState?this.excuteReadyQueue():window.document.addEventListener("readystatechange",function(){"complete"===window.document.readyState&&t.excuteReadyQueue()})}},{key:"excuteReadyQueue",value:function(){for(;w.length;)w.shift()()}}]),e}();window.mwsdk=window.mwsdk||new k,t["default"]=k},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o={},a={},i=function(){function e(){n(this,e)}return r(e,[{key:"config",value:function(t,n,r){if("undefined"!=typeof n)return e.set(t,n,r);if("string"==typeof t)return e.get(t);if("undefined"==typeof t){var a={};for(var i in o)a[i]=o[i];return a}}},{key:"constant",value:function(e,t){return"undefined"==typeof t?this.config(e):void this.config(e,t,!0)}},{key:"variable",value:function(e,t){return this.config(e,t)}}],[{key:"set",value:function(e,t,n){return"string"==typeof e?(a[e]||(o[e]=t,n===!0&&(a[e]=!0)),this.config):void 0}},{key:"get",value:function(e){return e?o[e]:void 0}}]),e}();t["default"]=new i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);r(o);t["default"]={marketing:"/marketing/v2",deeplinks:"/dp/dpls",getDeeplinks:"/dp/getDPL",deeplinkEvent:"/dp/event"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),u=r(i),l=n(!function(){var e=new Error('Cannot find module "./ajax"');throw e.code="MODULE_NOT_FOUND",e}()),d=r(l),s=n(!function(){var e=new Error('Cannot find module "./promise"');throw e.code="MODULE_NOT_FOUND",e}()),f=(r(s),n(!function(){var e=new Error('Cannot find module "./device"');throw e.code="MODULE_NOT_FOUND",e}())),c=r(f),p=n(2),v=r(p),h=function(){function e(){o(this,e)}return a(e,[{key:"getParams",value:function(){return{ak:c["default"].appKey||u["default"].constant("appkey"),os:c["default"].os,sv:c["default"].sdkVersion,d:c["default"].uuid,sr:c["default"].screen,av:c["default"].appVersion||u["default"].constant("av"),fp:c["default"].getCanvasFingerprint()}}},{key:"applyParams",value:function(e,t){if(e)for(var n in t)e=e.replace("{"+n.toUpperCase()+"}",t[n]);return e=e.replace(/\{(\w)*\}/g,"")}},{key:"getServer",value:function(){return u["default"].constant("server").replace(/\/$/,"")}},{key:"load",value:function(e){return"undefined"!=typeof e?this.loadCallback(e):this.loadPromise()}},{key:"loadCallback",value:function(e){var t=this.getParams(),n=this.getServer()+v["default"].marketing,r=new d["default"];return r.http({url:n,type:"get",dataType:"jsonp",params:t,success:e,error:function(e){console.log(e)}})}},{key:"loadPromise",value:function(){var e=this.getParams(),t=this.getServer()+v["default"].marketing,n=new d["default"];return n.http({url:t,type:"get",dataType:"jsonp",params:e})}}]),e}();t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(!function(){var e=new Error('Cannot find module "./ajax"');throw e.code="MODULE_NOT_FOUND",e}()),u=r(i),l=n(!function(){var e=new Error('Cannot find module "./uri"');throw e.code="MODULE_NOT_FOUND",e}()),d=r(l),s=n(!function(){var e=new Error('Cannot find module "./promise"');throw e.code="MODULE_NOT_FOUND",e}()),f=r(s),c=n(!function(){var e=new Error('Cannot find module "./common"');throw e.code="MODULE_NOT_FOUND",e}()),p=(r(c),n(1)),v=r(p),h=n(!function(){var e=new Error('Cannot find module "./device"');throw e.code="MODULE_NOT_FOUND",e}()),m=r(h),g=n(2),y=r(g),w=void 0,k=void 0,b=function(){function e(){o(this,e)}return a(e,[{key:"getRealUrl",value:function(e,t){if(!e)return"";t||(t={});var n=new d["default"](e),r=n.scheme,o=n.host,a=n.path,i=n.queryString,u=n.hash,l=[];return l.push(r),l.push("://"),l.push(o),a=this.replacePathParams(a,t),l.push(a),i=this.replaceQueryParams(i,t),l.push(i),u=this.replacePathParams(u,t),l.push("#"+u),l.join("")}},{key:"replacePathParams",value:function(e,t){var n=[],r=/^:/;return e="string"==typeof e?e.split("/"):e,e.forEach(function(e){e.match(r)?n.push(t[e.replace(r,"")]||""):n.push(e)}),n.join("/")}},{key:"replaceQueryParams",value:function(e,t){var n=e.split("&"),r=/^:/,o=[];return n.length>0&&n.forEach(function(e){e=e.split("=");var n=e[0],a=e[1];a&&a.match(r)&&(a=t[a.replace(r,"")]||""),o.push([n,a].join("="))}),o.length>0?"?"+o.join("&"):""}},{key:"openDownloadUrl",value:function(e){var t=this;setTimeout(function(){var n;n="undefined"!=typeof document.hidden?document.hidden:"undefined"!=typeof document.mozHidden?document.mozHidden:"undefined"!=typeof document.msHidden?document.msHidden:"undefined"!=typeof document.webkitHidden?document.webkitHidden:!1,t.sendDplEvent(e),0==n&&(window.location.href=e)},1500)}},{key:"redirect",value:function(e,t,n){var r=t.ak,o="http://fir.im/mwshowios",a="http://fir.im/mwshowandroid",i="mwshow://campaign/"+r,u=i,l="https://s.mlinks.cc/AAAc?key="+r;this.getRealUrl(e,n);if(m["default"].isWeixin()){var s=document.createElement("div");s.id="mw-download-tips";var f=l;!m["default"].isIos9()||"http"!==f&&"https"!==f?m["default"].isAndroid()?(s.classList.add("android"),s.classList.remove("ios")):isIos()&&(s.classList.add("ios"),s.classList.remove("android")):window.location.href=l}else if(m["default"].isIos()){var f=new d["default"](l).scheme;!m["default"].isIos9()||"http"!==f&&"https"!==f?(window.location.href=i,this.openDownloadUrl(o)):window.location.href=l}else window.location.href=u,this.openDownloadUrl(a)}},{key:"loadDPLs",value:function(){if(w)return new f["default"](function(e){e(w)});if(k)return k;var e=v["default"].constant("server").replace(/\/$/,"")+y["default"].deeplinks,t=new u["default"],n={ak:v["default"].constant("appkey")||v["default"].constant("ak"),av:v["default"].constant("appVersion")||v["default"].constant("av"),sv:m["default"].sdkVersion,uid:m["default"].uuid,fp:m["default"].getCanvasFingerprint(),d:m["default"].getCanvasFingerprint(),os:m["default"].os,osv:m["default"].version,m:m["default"].model,mf:m["default"].manufacturer,sr:m["default"].screen};return k=t.http({url:e,type:"POST",dataType:"json",ContentType:"application/json",params:n}).then(function(e){w=e.data,k=null},function(){k=null})}},{key:"getDPLs",value:function(){if(w)return new f["default"](function(e){e(w)});if(k)return k;var e=v["default"].constant("server").replace(/\/$/,"")+y["default"].getDeeplinks,t=new u["default"],n={ak:v["default"].constant("appkey")||v["default"].constant("ak"),av:v["default"].constant("appVersion")||v["default"].constant("av"),sv:m["default"].sdkVersion,uid:m["default"].uuid,fp:m["default"].getCanvasFingerprint(),d:m["default"].getCanvasFingerprint(),os:m["default"].os,osv:m["default"].version,m:m["default"].model,mf:m["default"].manufacturer,sr:m["default"].screen};return k=t.http({url:e,type:"POST",dataType:"json",ContentType:"application/json",params:n}).then(function(e){w=e.data,k=null},function(){k=null})}},{key:"sendDplEvent",value:function(e,t){var n=v["default"].constant("server").replace(/\/$/,"")+y["default"].deeplinkEvent,r=new u["default"],o={ak:v["default"].constant("appkey")||v["default"].constant("ak"),av:v["default"].constant("appVersion")||v["default"].constant("av"),sv:m["default"].sdkVersion,uid:m["default"].uuid,dp:t,ack:e.ack,dt:e,fp:m["default"].getCanvasFingerprint(),d:m["default"].getCanvasFingerprint(),os:m["default"].os,osv:m["default"].version,m:m["default"].model,mf:m["default"].manufacturer,sr:m["default"].screen};r.http({url:n,type:"POST",dataType:"json",ContentType:"application/json",params:o})}}]),e}();t["default"]=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(!function(){var e=new Error('Cannot find module "./cookie"');throw e.code="MODULE_NOT_FOUND",e}()),u=r(i),l=function(){function e(){o(this,e)}return a(e,null,[{key:"setPhoneNumber",value:function(e){u["default"].setCookie("phoneNumber",e)}},{key:"getPhoneNumber",value:function(){return u["default"].getCookie("phoneNumber")}},{key:"setCityCode",value:function(e){u["default"].setCookie("cityCode",e)}},{key:"getCityCode",value:function(){return u["default"].getCookie("cityCode")}},{key:"setUserProfile",value:function(e){u["default"].setCookie("userProfile",e)}},{key:"getUserProfile",value:function(){return u["default"].getCookie("userProfile")}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),u=r(i),l=n(!function(){var e=new Error('Cannot find module "./common"');throw e.code="MODULE_NOT_FOUND",e}()),d=r(l),s=void 0,f=new u["default"],c=function(){function e(t){o(this,e),s=t,this.watch(),f.loadDPLs()}return a(e,[{key:"watch",value:function(){var e=this;s&&s.length>0&&s.forEach(function(t){for(var n,r=e.getMwBlocks(t.k),o=0,a=r.length;a>o;o++)n=r[o],n.getAttribute("render")||e.render(t,n)}),setTimeout(function(){e.watch()},1e3)}},{key:"getMwBlocks",value:function(e){for(var t=document.getElementsByTagName("mw-block"),n=[],r=0,o=t.length;o>r;r++)t[r].getAttribute("id")===e&&n.push(t[r]);return n}},{key:"render",value:function(e,t){t.setAttribute("data-au",e.au),t.innerHTML='<img src="'+e.iu+'" style="max-width:100%;"/>',this.initMwBlockEvent(e,t),t.setAttribute("render",!0)}},{key:"initMwBlockEvent",value:function(e,t){var n=this;t.getAttribute("render")||t.addEventListener("click",function(){var r=decodeURIComponent(t.getAttribute("data-au"));if(n.showLoading(t),4===new Number(e.dt)){var o=d["default"].parseJson(t.getAttribute("data-mlink-params"));f.redirect(r,e,o)}else window.location=r.replace(/([&\?])?mw=1[&$]?/g,"$1")})}},{key:"showLoading",value:function(e){var t=document.createElement("div"),n=document.createElement("div");t.classList.add("mw-loading"),t.addEventListener("click",function(r){r.stopPropagation(),t.removeChild(n),e.removeChild(t),t=null,n=null,e=null}),e.appendChild(t),n.classList.add("mw-loading-icon"),t.appendChild(n)}}]),e}();t["default"]=c},function(e,t,n){t=e.exports=n(8)(),t.push([e.id,'@-webkit-keyframes mw-kfr-loading{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes mw-kfr-loading{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}mw-block{display:block;position:relative}.mw-loading{top:0;left:0;right:0;bottom:0;z-index:10;background-color:rgba(0,0,0,.5)}.mw-loading,.mw-loading-icon{display:block;position:absolute}.mw-loading-icon{height:48px;width:48px;z-index:100000000000;top:50%;left:50%;margin:-24px auto auto -24px;border:3px solid hsla(0,0%,100%,0);border-top:3px solid hsla(0,0%,100%,.8);border-left:2px dotted hsla(0,0%,100%,.6);border-bottom:1px dashed hsla(0,0%,100%,.2);border-radius:50%;box-shadow:0 0 15px #000;-webkit-animation:mw-kfr-loading .8s linear infinite;animation:mw-kfr-loading .8s linear infinite}#mw-download-tips{display:none;position:fixed;z-index:9990;width:100%;height:100%;top:0;left:0;right:0;background-color:rgba(0,0,0,.8);background-repeat:no-repeat;background-position:100% 0;background-size:85% auto}#mw-download-tips.android{display:block;background-image:url("http://activity.test.magicwindow.cn/common/asserts/navigator-modal/bg-android.png")}#mw-download-tips.ios{display:block;background-image:url("http://activity.test.magicwindow.cn/common/asserts/navigator-modal/bg-ios.png")}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<t.length;o++){var i=t[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(d(r.parts[a],t))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(d(r.parts[a],t));p[r.id]={id:r.id,refs:1,parts:i}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],a=o[0],i=o[1],u=o[2],l=o[3],d={css:i,media:u,sourceMap:l};n[a]?n[a].parts.push(d):t.push(n[a]={id:a,parts:[d]})}return t}function a(e,t){var n=m(),r=w[w.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),w.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=w.indexOf(e);t>=0&&w.splice(t,1)}function u(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function d(e,t){var n,r,o;if(t.singleton){var a=y++;n=g||(g=u(t)),r=s.bind(null,n,a,!1),o=s.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=c.bind(null,n),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(t),r=f.bind(null,n),o=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function s(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function f(e,t){var n=t.css,r=t.media;t.sourceMap;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function c(e,t){var n=t.css,r=(t.media,t.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var p={},v=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=v(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=v(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,w=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var u=n[i],l=p[u.id];l.refs--,a.push(l)}if(e){var d=o(e);r(d,t)}for(var i=0;i<a.length;i++){var l=a[i];if(0===l.refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete p[l.id]}}}};var k=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.id,r,""]]);n(9)(r,{});r.locals&&(e.exports=r.locals)}]);